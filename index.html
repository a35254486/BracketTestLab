<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules of the Road March Madness</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Roboto+Condensed:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <style>
        :root {
            --NavyBlack: #08262C;
            --Yellow: #E8B00F;
            --White: #FFFFFF;
            --light-gray: #F5F5F5;
            --border: #bbbbbb;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Roboto Condensed', sans-serif;
            background: var(--light-gray);
            padding: 1rem;
            text-align: center;
        }
        .container {
            display: inline-block;
            text-align: left;
            background: var(--White);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 59, 79, 0.15);
            padding: 1rem;
        }
        header {
            text-align: center;
            margin-bottom: 1rem;
            background-color: var(--NavyBlack);
            border: 4px solid var(--Yellow);
            padding: 1rem;
            border-radius: 10px;
        }
        h1 {
            font-family: "Josefin Sans", sans-serif;
            font-size: 5.25rem;
            color: var(--White);
            letter-spacing: 2px;
            text-transform: uppercase;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            font-family: "Josefin Sans", sans-serif;
            font-size: 2.75rem;
            color: var(--White);
            text-transform: uppercase;
            font-weight: 600;
   		    font-style: italic;
        }
        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
        }
        .zoom-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        .zoom-controls span {
            font-weight: 600;
            color: var(--NavyBlack);
            min-width: 60px;
            text-align: center;
        }
        button {
            font-family: 'Roboto Condensed', sans-serif;
            font-weight: 700;
            font-size: 0.95rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .btn-NavyBlack { background: var(--NavyBlack); color: white; }
        .btn-NavyBlack:hover { background: #005266; transform: translateY(-2px); }
        .btn-secondary { background: var(--Yellow); color: var(--NavyBlack); }
        .btn-secondary:hover { background: #D4A20D; transform: translateY(-2px); }
        .btn-Yellow { background: white; color: var(--NavyBlack); border: 2px solid var(--NavyBlack); }
        .btn-Yellow:hover { background: var(--NavyBlack); color: white; }
        .bracket-scroll {
            overflow: auto;
            padding: 1rem 0;
            position: relative;
        }
        .bracket-container {
            display: inline-block;
            min-width: auto;
            transform-origin: top left;
            transition: transform 0.2s ease;
            opacity: 0;
        }
        .bracket-container.loaded {
            opacity: 1;
        }
        .bracket {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 60px;
            min-width: max-content;
        }
        .bracket-half { display: flex; gap: 60px; }
        .bracket-half.left { flex-direction: row; }
        .bracket-half.right { flex-direction: row-reverse; }
        .finals-column {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding-top: 5rem;
            align-self: flex-start;
        }
        .round { display: flex; flex-direction: column; }
        .round-header {
            font-family: "Josefin Sans", sans-serif;
            font-size: 1.1rem;
            color: var(--NavyBlack);
            text-align: center;
            font-weight: 750;
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
            font-style: italic;
        }
        .bracket-half.left .round-header { text-align: right; }
        .bracket-half.right .round-header { text-align: left; }
        .round-matches { display: flex; flex-direction: column; }
        .match { position: relative; }
        .round1 .match { margin: 0; }
        .round2 .match { margin: 54px 0; }
        .round3 .match { margin: 142px 0; }
        .round4 .match { margin: 318px 0; }
        .round5 .match { margin: 670px 0; }
        .round6 .match { margin: 0; }
        .match-line {
            position: relative;
            display: flex;
            align-items: stretch;
            margin: 2px 0;
        }
        .team {
            background: white;
            border: 2px solid var(--border);
            padding: 10px 15px;
            flex-grow: 1;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            font-weight: 700;
            font-size: 1.0rem;
            border-radius: 0 6px 6px 0;
        }
        .team:hover {
            border-color: var(--Yellow);
            background: #FFFEF5;
        }
        .bracket-half.left .team:hover { transform: translateX(3px); }
        .bracket-half.right .team:hover { transform: translateX(-3px); }
        .team.winner { background: var(--NavyBlack); color: white; border-color: var(--NavyBlack); font-weight: 700; }
        .team.loser { background: var(--light-gray); color: #999; opacity: 0.6; }
        .team.highlighted { background: var(--Yellow); color: var(--NavyBlack); border-color: var(--Yellow); font-weight: 700; }
        .seed {
            display: flex;
            justify-content: center;
            align-items: center;
            background: var(--Yellow);
            color: var(--NavyBlack);
            font-size: 0.9rem;
            font-weight: 700;
            width: 35px;
            flex-shrink: 0;
            border: 2px solid var(--border);
            border-right: none;
            border-radius: 6px 0 0 6px;
        }
        .winner .seed { background: var(--Yellow); color: var(--NavyBlack); }
        .match-line::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 30px;
            height: 2px;
            background: var(--NavyBlack);
            transform: translateY(-50%);
        }
        .match-line::before {
            content: '';
            position: absolute;
            width: 2px;
            background: var(--NavyBlack);
        }
        .round-matches .match:nth-of-type(2n-1) .match-line::before {
            top: 50%;
        }
        .round-matches .match:nth-of-type(2n) .match-line::before {
            display: none;
        }
        .bracket-half.left .match-line::after { left: 100%; }
        .bracket-half.left .round-matches .match:nth-of-type(2n-1) .match-line::before { left: calc(100% + 30px); }
        .bracket-half.right .match-line::after { right: 100%; }
        .bracket-half.right .round-matches .match:nth-of-type(2n-1) .match-line::before { right: calc(100% + 30px); }
        .round1 .round-matches .match:nth-of-type(2n-1) .match-line::before { height: calc(100% + 4px); }
        .round2 .round-matches .match:nth-of-type(2n-1) .match-line::before { height: calc(100% + 108px); }
        .round3 .round-matches .match:nth-of-type(2n-1) .match-line::before { height: calc(100% + 284px); }
        .round4 .round-matches .match:nth-of-type(2n-1) .match-line::before { height: calc(100% + 636px); }
        .bracket-half.right .round5 .round-matches .match:nth-of-type(2n-1) .match-line::before,
        .bracket-half.left .round5 .round-matches .match:nth-of-type(2n-1) .match-line::before { height: calc(100% + 1340px); }
        
        .round1 .team:not(.winner):not(.loser) {
            background-color: var(--NavyBlack);
            color: white;
            border-color: var(--NavyBlack);
        }
        .round1 .match-line:first-of-type .team:not(.winner):not(.loser) {
            border-bottom-color: white;
        }
        .round1 .team:not(.winner):not(.loser):hover {
            background-color: #FFFEF5;
            border-color: var(--Yellow);
            color: var(--NavyBlack);
        }
        .finals-column .match-line::before,
        .finals-column .match-line::after {
            display: none;
        }
        .center-logo { display: block; max-width: 750px; height: auto; margin-bottom: 3rem; }
        .champion-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(8, 38, 44, 0.85);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .champion-overlay.show { display: flex; }
        .champion-display {
            text-align: center;
            padding: 2rem;
            background: var(--NavyBlack);
            border: 4px solid var(--Yellow);
            border-radius: 8px;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        .champion-display h2 { font-family: 'Josefin Sans', sans-serif; font-size: 4.5rem; color: var(--Yellow); margin-bottom: 1rem; font-weight: 700; letter-spacing: 2px; }
        .champion-name { font-size: 4.0rem; font-weight: 700; color: white; text-transform: uppercase; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Rules of the Road March Madness</h1>
            <p class="subtitle">Who rules the Rules?</p>
        </header>
        <div class="controls">
            <!-- <button class="btn-NavyBlack" onclick="resetBracket()">Reset Bracket</button> -->
            <!-- <div class="zoom-controls">
                <button class="btn-secondary" onclick="zoomOut()">-</button>
                <span id="zoomLevel">100%</span>
                <button class="btn-secondary" onclick="zoomIn()">+</button>
            </div> -->
        </div>
        <div class="bracket-scroll" id="bracketScroll">
            <div class="bracket-container" id="bracketContainer">
                <div class="bracket" id="bracket"></div>
            </div>
        </div>
    </div>
    <div class="champion-overlay" id="championOverlay">
        <div class="champion-display">
            <h2> N72 RULES OF THE ROAD CHAMPION </h2>
            <div class="champion-name" id="championName"></div>
        </div>
    </div>
    <script>
        let players = [
			"LT Patrick Vivian", "BYE", "LT Jonathan Sodano", "LT Branden Ward", "LT Kevin Sweetman", "William Lyons", "LT Geoff Welch", "BYE", "LT David Harland", "LT Robert Beurket", "LT Wyatt Moore", "BYE", "LT Blake Fontaine", "LT Ben Severson", "David Kane", "BYE",
			"LT Meredith Engel", "BYE", "Walt O'Donnell", "Tanner Blythe", "Katie Moore", "Jerry Tredo", "LCDR Gregory Christod", "BYE", "LCDR Alexander Kavall", "QMC Montraye Whaley", "LT John O'Connell", "BYE", "LT Branner Astrop", "LT Gregory Holmes", "Ted Olson", "BYE",
			"LT Kevin Brunner", "BYE", "QMC Jonathon Zitt", "LCDR Jocelyn Addeo", "David Parkhurst", "CAPT Tim Steadman", "Davis Chandler", "BYE", "LT Kellen Gray", "QMC Robert Papili", "LT Alex Egbers", "BYE", "CAPT Leo Mcdonough", "QMCS Daniel Urbano", "LT Seth Bradley", "BYE",
			"CAPT Michael Shanley", "BYE", "LT Tony Kennedy", "LT Ian Johnson", "CAPT Philip Lapointe", "CDR Michael Chesnut", "LT Gabriel Ptasienski", "BYE", "LT Alexander Mcquain", "LT Jacob Vehrs", "David Carrillo", "BYE", "LT Steven Tommasello", "LT Benjamin Deforest", "Kat Hunter", "BYE"
        ];
        const rounds = [
            { name: 'FIRST ROUND', matches: 32, class: 'round1' }, { name: 'SECOND ROUND', matches: 16, class: 'round2' }, { name: 'SWEET 16', matches: 8, class: 'round3' },
            { name: 'ELITE 8', matches: 4, class: 'round4' }, { name: 'FINAL 4', matches: 2, class: 'round5' }, { name: 'CHAMPIONSHIP', matches: 1, class: 'round6' }
        ];
        let bracketData = {};
        let baseScale = 1.0;
        let manualScale = 1.0;

        function zoomIn() {
            manualScale = Math.min(manualScale + 0.1, 2);
            updateZoom();
        }
        function zoomOut() {
            manualScale = Math.max(manualScale - 0.1, 0.5);
            updateZoom();
        }
        function updateZoom() {
            const container = document.getElementById('bracketContainer');
            container.style.transform = `scale(${baseScale * manualScale})`;
        }
        
        function fitBracketOnLoad() {
            const scrollContainer = document.getElementById('bracketScroll');
            const bracketContainer = document.getElementById('bracketContainer');
            if (!scrollContainer || !bracketContainer) return;
            bracketContainer.style.transform = 'scale(1)';
            const containerWidth = scrollContainer.clientWidth;
            const bracketWidth = bracketContainer.scrollWidth;
            if (bracketWidth > containerWidth) {
                baseScale = (containerWidth - 20) / bracketWidth;
            } else {
                baseScale = 1;
            }
            manualScale = 1.0;
            updateZoom();
            bracketContainer.classList.add('loaded');
        }

        function initializeBracket() {
            bracketData = {};
            const bracket = document.getElementById('bracket');
            bracket.innerHTML = '';
            const leftHalf = document.createElement('div');
            leftHalf.className = 'bracket-half left';
            const rightHalf = document.createElement('div');
            rightHalf.className = 'bracket-half right';
            for (let roundIndex = 0; roundIndex < 5; roundIndex++) {
                const round = rounds[roundIndex];
                leftHalf.appendChild(createRound(round, roundIndex, 0, round.matches / 2));
                rightHalf.appendChild(createRound(round, roundIndex, round.matches / 2, round.matches / 2));
            }
            const finalsDiv = document.createElement('div');
            finalsDiv.className = 'finals-column';
            const finalsRound = createRound(rounds[5], 5, 0, 1);
            const logo = document.createElement('img');
            logo.src = 'SWSC_logo.png';
            logo.alt = 'Bracket Logo';
            logo.className = 'center-logo';
            finalsDiv.appendChild(logo);
            finalsDiv.appendChild(finalsRound);
            bracket.appendChild(leftHalf);
            bracket.appendChild(finalsDiv);
            bracket.appendChild(rightHalf);
            attachClickHandlers();
            attachHoverHandlers();
        }
        function createRound(round, roundIndex, startMatch, matchCount) {
            const roundDiv = document.createElement('div');
            roundDiv.className = `round ${round.class}`;
            const header = document.createElement('div');
            header.className = 'round-header';
            header.textContent = round.name;
            roundDiv.appendChild(header);
            const matchesDiv = document.createElement('div');
            matchesDiv.className = 'round-matches';
            for (let i = 0; i < matchCount; i++) {
                const matchIndex = startMatch + i;
                const matchId = `r${roundIndex}-m${matchIndex}`;
                const matchDiv = document.createElement('div');
                matchDiv.className = 'match';
                matchDiv.dataset.matchId = matchId;
                if (roundIndex === 0) {
                    const p1Index = matchIndex * 2, p2Index = matchIndex * 2 + 1;
                    const seedPattern = [1, 16, 8, 9, 5, 12, 4, 13, 6, 11, 3, 14, 7, 10, 2, 15];
                    const seed1 = seedPattern[(matchIndex % 8) * 2], seed2 = seedPattern[(matchIndex % 8) * 2 + 1];
                    bracketData[matchId] = { teams: [{ name: players[p1Index], seed: seed1 }, { name: players[p2Index], seed: seed2 }], winner: null };
                    matchDiv.innerHTML = `<div class="match-line"><div class="seed">${seed1}</div><div class="team" data-match="${matchId}" data-team="0">${players[p1Index]}</div></div><div class="match-line"><div class="seed">${seed2}</div><div class="team" data-match="${matchId}" data-team="1">${players[p2Index]}</div></div>`;
                } else {
                    bracketData[matchId] = { teams: [{ name: 'TBD', seed: null }, { name: 'TBD', seed: null }], winner: null };
                    matchDiv.innerHTML = `<div class="match-line"><div class="seed">-</div><div class="team" data-match="${matchId}" data-team="0">TBD</div></div><div class="match-line"><div class="seed">-</div><div class="team" data-match="${matchId}" data-team="1">TBD</div></div>`;
                }
                matchesDiv.appendChild(matchDiv);
            }
            roundDiv.appendChild(matchesDiv);
            return roundDiv;
        }
        function attachClickHandlers() { document.querySelectorAll('.team').forEach(team => team.addEventListener('click', function() { selectWinner(this.dataset.match, parseInt(this.dataset.team)); })); }
        function attachHoverHandlers() { document.querySelectorAll('.team').forEach(team => { team.addEventListener('mouseenter', function() { highlightPlayer(this.textContent); }); team.addEventListener('mouseleave', clearHighlights); }); }
        
        function selectWinner(matchId, teamIndex) {
            const match = bracketData[matchId];
            const selectedTeam = match.teams[teamIndex];
            if (selectedTeam.name === 'TBD' || selectedTeam.name === 'BYE') return;
            const isAlreadyDecided = match.winner !== null;
            const isWinnerClicked = isAlreadyDecided && match.winner === teamIndex;
            if (isAlreadyDecided) {
                clearFutureMatches(matchId);
            }
            if (isWinnerClicked) {
                match.winner = null;
                const matchLines = document.querySelector(`[data-match-id="${matchId}"]`).querySelectorAll('.match-line');
                matchLines.forEach(line => line.querySelector('.team').classList.remove('winner', 'loser'));
            } else {
                match.winner = teamIndex;
                const matchLines = document.querySelector(`[data-match-id="${matchId}"]`).querySelectorAll('.match-line');
                matchLines.forEach((line, lineIdx) => {
                    const team = line.querySelector('.team');
                    if (parseInt(team.dataset.team) === teamIndex) {
                        team.classList.add('winner');
                        team.classList.remove('loser');
                    } else {
                        team.classList.add('loser');
                        team.classList.remove('winner');
                    }
                });
                advanceWinner(matchId, selectedTeam);
            }
        }
        function advanceWinner(matchId, winningTeam) {
            const [roundNum, matchNum] = matchId.substring(1).split('-m').map(Number);
            if (roundNum >= rounds.length - 1) {
                showChampion(winningTeam.name);
                return;
            }
            const nextMatchId = `r${roundNum + 1}-m${Math.floor(matchNum / 2)}`;
            const position = matchNum % 2;
            bracketData[nextMatchId].teams[position] = { name: winningTeam.name, seed: winningTeam.seed };
            const nextMatchLine = document.querySelector(`[data-match-id="${nextMatchId}"]`).querySelectorAll('.match-line')[position];
            nextMatchLine.querySelector('.team').textContent = winningTeam.name;
            nextMatchLine.querySelector('.seed').textContent = winningTeam.seed || '-';
        }
        function clearFutureMatches(matchId) {
            const [roundNum, matchNum] = matchId.substring(1).split('-m').map(Number);
            if (roundNum >= rounds.length - 1) {
                showChampion(null);
                return;
            }
            const nextMatchId = `r${roundNum + 1}-m${Math.floor(matchNum / 2)}`;
            const position = matchNum % 2;
            if (!bracketData[nextMatchId]) return;
            if (bracketData[nextMatchId].winner !== null) {
                clearFutureMatches(nextMatchId);
            }
            bracketData[nextMatchId].teams[position] = { name: 'TBD', seed: null };
            bracketData[nextMatchId].winner = null;
            const nextMatchDiv = document.querySelector(`[data-match-id="${nextMatchId}"]`);
            if (nextMatchDiv) {
                const teamLineToClear = nextMatchDiv.querySelectorAll('.match-line')[position];
                teamLineToClear.querySelector('.team').textContent = 'TBD';
                teamLineToClear.querySelector('.seed').textContent = '-';
                nextMatchDiv.querySelectorAll('.team').forEach(team => team.classList.remove('winner', 'loser'));
            }
        }
        function showChampion(name) {
            const overlay = document.getElementById('championOverlay');
            const championNameEl = document.getElementById('championName');
            if (name) {
                championNameEl.textContent = name;
                overlay.classList.add('show');
            } else {
                overlay.classList.remove('show');
                championNameEl.textContent = '';
            }
        }
        function highlightPlayer(name) { if (name === 'TBD' || name === 'BYE') return; document.querySelectorAll('.team').forEach(team => { if (team.textContent === name) { team.classList.add('highlighted'); } }); }
        function clearHighlights() { document.querySelectorAll('.team').forEach(team => team.classList.remove('highlighted')); }
        function resetBracket() {
            document.getElementById('championOverlay').classList.remove('show');
            initializeBracket();
            fitBracketOnLoad();
        }
        function exportBracket() {
            const data = { players, bracket: bracketData, timestamp: new Date().toISOString() };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'tournament-bracket.json';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        document.fonts.ready.then(() => {
            initializeBracket();
            fitBracketOnLoad();
        });

        document.getElementById('championOverlay').addEventListener('click', () => {
            document.getElementById('championOverlay').classList.remove('show');
        });
    </script>
</body>
</html>
